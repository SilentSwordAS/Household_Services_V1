{% extends "base_dashboard.html" %}
{% block title %}Customer Dashboard[XYZ Household Services]{% endblock %}
{% block nav_first %}<a class="nav-link active" href="{{url_for('customer_dashboard')}}"><b>Home</b></a>{% endblock %}
{% block nav_second %}<a class="nav-link" href="{{url_for('customer_dashboard_summary')}}"><b>Summary</b></a>{% endblock %}
{% block nav_third %}<a class="nav-link" href="{{url_for('customer_dashboard_search')}}"><b>Search</b></a>{% endblock %}
{% block content %}
<div class="container-fluid text-center mt-3" style="background-color: #0C2D48; color:white;border:10px solid black;">
    <p class="h1 mb-3 mt-3"><b>Services Offered</b></p>
    {% for sub_list in service_list %}
    <div class="row">
      {% for service in sub_list %}
      <div class="col">
        <div class="card m-3" style="border: 1px solid #25292d;">
          <div class="card-body">
            <h4 class="card-title"><b>{{service.name}}</b></h4>
            <p class="card-text">{{service.description}}</p>    
            <a href="/customer/view/service/{{service.serv_id}}" class="btn btn-primary m-2"><b>Book Service</b></a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% endfor %}
</div>
<div class="container-fluid text-center mt-3" style="background-color: #0C2D48; color:white;border:10px solid black;">
    <p class="h1 mb-3 mt-3"><b>Service History</b></p>
    <table class="table table-dark table-striped">
    <thead>
    <tr>
        <th>
            S. No.
        </th>
        <th>
            Service Name
        </th>
        <th>
            Professional Username
        </th>
        <th>
            Date of Request
        </th>
        <th>
            Phone Number
        </th>
        <th>
            Status
        </th>
        <th>
            Actions
        </div>
    </tr>
    </thead>
    <tbody>
    {% if mod_req_list | length != 0 %}
        {% for pro_username, pro_service, req_status, pro_contact, req_id, date in mod_req_list %}
            <tr>
                <td class="align-middle">
                    {{loop.index}}
                </td>
                <td class="align-middle">
                    {{pro_service}}
                </td>
                <td class="align-middle">  
                    {{pro_username}}
                </td>
                <td class="align-middle">
                    {{date}}
                </td>
                <td class="align-middle">
                    {{pro_contact}}
                </td>
                <td class="align-middle">
                    {{req_status}}
                </td>
                <td>
                    {% if req_status == 'Accepted' %}
                        <a href="/customer/edit/request/{{req_id}}" class="btn btn-primary"><b>Edit Request</b></a>
                        <a href="/customer/close/request/{{req_id}}" class="btn btn-success"><b>Close Request</b></a>
                    {% elif req_status == 'Requested' %}
                        <a href="/customer/edit/request/{{req_id}}" class="btn btn-primary"><b>Edit Request</b></a>
                        <a href="/customer/delete/request/{{req_id}}" class="btn btn-danger"><b>Delete Request</b></a>
                    {% elif req_status == 'Closed' %}
                        <a href="/customer/edit/request/{{req_id}}" class="btn btn-primary"><b>Edit Request</b></a>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    {% else %}
        <tr>
            <th colspan="7">
                No service history found.
            </th>
        </tr>
    {% endif %}
    </tbody>
</table>
</div>
{% endblock %}
