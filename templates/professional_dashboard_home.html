{% extends "base_dashboard.html" %}
{% block title %}Professional Dashboard[XYZ Household Services]{% endblock %}
{% block nav_first %}<a class="nav-link active" href="{{url_for('professional_dashboard')}}"><b>Home</b></a>{% endblock %}
{% block nav_second %}<a class="nav-link" href="{{url_for('professional_dashboard_summary')}}"><b>Summary</b></a>{% endblock %}
{% block content %}
<div class="container-fluid text-center mt-3" style="background-color: #0C2D48; color:white;border:10px solid black;">
    <p class="h1 mb-3 mt-3"><b>Private Pending Requests</b></p>
    <table class="table table-dark table-striped">
    <thead>
    <tr>
      <th>
          S. No.
      </th>
      <th>
          Customer Name
      </th>
      <th>
          Contact Number
      </th>
      <th>
          Location
      </th>
      <th>
          Actions
      </th>
    </tr>
    </thead>
    <tbody>
    {% if private_requests | length != 0 %}
        {% for request, customer in private_requests %}
            <tr>
                <td class="align-middle">
                    {{loop.index}}
                </td>
                <td class="align-middle">
                    {{customer.first_name + " " + customer.last_name}}
                </td>
                <td class="align-middle">
                    {{customer.contact}}
                </td>
                <td class="align-middle">
                    {{customer.address + " " + customer.pin_code | string}}
                </td>
                <td class="align-middle">
                    <a href="/professional/accept/request/{{ request.id }}"><button class="btn btn-success text-center m-2"><b>Accept</b></button></a>
                    <a href="/professional/reject/request/{{ request.id }}"><button class="btn btn-danger text-center m-2"><b>Reject</b></button></a>
                </td>
            </tr>
        {% endfor %}
    {% else %}
        <tr>
            <th colspan="5">
                No requests found.
            </th>
        </tr>
    {% endif %}
    </tbody>
    </table>
    <p class="h1 mb-3 mt-3"><b>Public Pending Requests</b></p>
    <table class="table table-dark table-striped">
    <thead>
    <tr>
      <th>
          S. No.
      </th>
      <th>
          Customer Name
      </th>
      <th>
          Contact Number
      </th>
      <th>
          Location
      </th>
      <th>
          Actions
      </th>
    </tr>
    </thead>
    <tbody>
    {% if public_requests | length != 0 %}
        {% for request, customer in public_requests %}
            <tr>
                <td class="align-middle">
                    {{loop.index}}
                </td>
                <td class="align-middle">
                    {{customer.first_name + " " + customer.last_name}}
                </td>
                <td class="align-middle">
                    {{customer.contact}}
                </td>
                <td class="align-middle">
                    {{customer.address + " " + customer.pin_code | string}}
                </td>
                <td class="align-middle">
                    <a href="/professional/accept/request/{{request.id}}"><button class="btn btn-success text-center m-2"><b>Accept</b></button></a>
                </td>
            </tr>
        {% endfor %}
    {% else %}
        <tr>
            <th colspan="5">
                No requests found.
            </th>
        </tr>
    {% endif %}
    </tbody>
    </table>
</div>
<div class="container-fluid text-center mt-3" style="background-color: #0C2D48; color:white;border:10px solid black;">
    <p class="h1 mb-3 mt-3"><b>Accepted Requests</b></p>
    <table class="table table-dark table-striped">
    <thead>
    <tr>
        <th>
            S. No.
        </th>
        <th>
            Customer Name
        </th>
        <th>
            Contact Number
        </th>
        <th>
            Location
        </th>
        <th>
            Status
        </th>
    </tr>
    </thead>
    <tbody>
    {% if accepted_requests | length != 0 %}
        {% for request, customer in accepted_requests %}
            <tr>
                <td>
                    {{loop.index}}
                </td>
                <td>
                    {{customer.first_name + " " + customer.last_name}}
                </td>
                <td>
                    {{customer.contact}}
                </td>
                <td>
                    {{customer.address + " " + customer.pin_code | string}}
                </td>
                <td>
                    Accepted
                </td>
            </tr>
        {% endfor %}
    {% else %}
        <tr>
            <th colspan="5">
                No requests found.
            </th>
        </tr>
    {% endif %}
    </tbody>
    </table>
</div>
<div class="container-fluid text-center mt-3" style="background-color: #0C2D48; color:white;border:10px solid black;">
    <p class="h1 mb-3 mt-3"><b>Closed Requests</b></p>
    <table class="table table-dark table-striped">
    <thead>
    <tr>
        <th>
            S. No.
        </th>
        <th>
            Customer Name
        </th>
        <th>
            Contact Number
        </th>
        <th>
            Location
        </th>
        <th>
            Date of Request
        </th>
        <th>
            Date of Service
        </th>
        <th>
            Ratings
        </th>
        <th>
            Remarks
        </th>
    </tr>
    </thead>
    <tbody>
    {% if closed_requests | length != 0 %}
        {% for request, customer in closed_requests %}
            <tr>
                <td>
                    {{loop.index}}
                </td>
                <td>
                    {{customer.first_name + " " + customer.last_name}}
                </td>
                <td>
                    {{customer.contact}}
                </td>
                <td>
                    {{customer.address + " " + customer.pin_code | string}}
                </td>
                <td>
                    {{request.date_of_request}}
                </td>
                <td>
                    {{request.date_of_completion}}
                </td>
                <td>
                    {{request.ratings}}
                </td>
                <td>
                    {{request.remarks}}
                </td>
            </tr>
        {% endfor %}
    {% else %}
        <tr>
            <th colspan="8">
                No requests found.
            </th>
        </tr>
    {% endif %}
    </tbody>
    </table>
</div>
{% endblock %}